# ============================================================
# Ollama Proxy Server - Environment Configuration Example
# ============================================================
# Copy this file to .env and customize values as needed.
# NEVER commit your actual .env file to version control!
# ============================================================

# --- CORE SETTINGS ---
# Database URL (default: SQLite in current directory)
# Examples:
#   SQLite (default): sqlite+aiosqlite:///./ollama_proxy.db
#   PostgreSQL: postgresql+asyncpg://user:password@localhost/ollama_proxy
DATABASE_URL=sqlite+aiosqlite:///./ollama_proxy.db

# Admin user credentials (used for first login)
# IMPORTANT: Change these in production!
ADMIN_USER=admin
ADMIN_PASSWORD=changeme

# Server port (default: 8080)
# Change if port 8080 is already in use
PROXY_PORT=8080

# Secret key for session encryption (MUST be changed in production!)
# Generate a new one with: python -c "import secrets; print(secrets.token_hex(32))"
# This is used to encrypt session data and API keys stored in the database
SECRET_KEY=CHANGE_THIS_IN_PRODUCTION_GENERATE_WITH_SECRETS_TOKEN_HEX

# Logging level (debug, info, warning, error, critical)
LOG_LEVEL=info

# --- REDIS CONFIGURATION (Optional but Recommended) ---
# Redis is used for rate limiting and session management
# Leave empty if you don't want to use Redis (rate limiting will be disabled)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_USERNAME=
REDIS_PASSWORD=

# --- IP FILTERING (Optional) ---
# Comma-separated list of allowed IP addresses (leave empty to allow all)
# Example: ALLOWED_IPS=127.0.0.1,192.168.1.100
ALLOWED_IPS=

# Comma-separated list of denied IP addresses (leave empty to deny none)
# Example: DENIED_IPS=192.168.1.50
DENIED_IPS=

# --- OLLAMA WEB SEARCH API KEYS (Optional) ---
# These are used for web search functionality when SearXNG is not available
# Get your API keys at: https://ollama.com/settings/keys
# 
# Free tier: Limited searches per day
# Paid tier: Higher rate limits
#
# You can use one or both keys (second key is for load balancing/backup)
# If you don't configure these, web search will only work if SearXNG is set up
OLLAMA_API_KEY=
OLLAMA_API_KEY_2=

# --- SEARXNG CONFIGURATION (Optional but Recommended) ---
# SearXNG is a privacy-respecting metasearch engine that can be self-hosted
# If configured, it will be used as the PRIMARY search engine
# Ollama cloud search will be used as a fallback if SearXNG is unavailable
#
# Option 1: Use local SearXNG instance (recommended for privacy)
#   - Install SearXNG: https://github.com/searxng/searxng
#   - Run it locally (e.g., on port 7019 via Caddy or Docker)
#   - Set SEARXNG_URL to your instance URL
#   Example: SEARXNG_URL=http://localhost:7019
#
# Option 2: Use Ollama cloud search only (simpler, but has rate limits)
#   - Leave SEARXNG_URL empty or unset
#   - Configure OLLAMA_API_KEY above
#   - Web search will use Ollama cloud service directly
#
# Option 3: Use both (best of both worlds)
#   - Configure both SEARXNG_URL and OLLAMA_API_KEY
#   - System will try SearXNG first, fall back to Ollama if SearXNG fails
SEARXNG_URL=http://localhost:7019

# ============================================================
# NOTES:
# ============================================================
# 1. After creating your .env file, run the setup wizard:
#    - Windows: run_windows.bat
#    - Linux/Mac: ./run.sh
#
# 2. The setup wizard will prompt you for admin credentials
#    and generate a secure SECRET_KEY automatically.
#
# 3. For production deployments:
#    - ALWAYS change ADMIN_PASSWORD
#    - ALWAYS generate a new SECRET_KEY
#    - Use strong Redis passwords if using Redis
#    - Configure IP filtering for security
#
# 4. For SearXNG setup:
#    - See SEARXNG_SETUP.md for detailed instructions
#    - Or use Docker: docker-compose -f docker-compose.searxng.yml up -d
#    - Default port is 7019, but you can change it
#
# 5. For OpenRouter integration:
#    - Add OpenRouter servers via the admin dashboard
#    - Configure API keys in server settings (stored encrypted)
#    - No need to add OpenRouter keys here
# ============================================================
